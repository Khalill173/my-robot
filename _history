{"entries":[{"timestamp":1752500609157,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"http"],[-1,"s"],[0,"://"],[-1,"developers.google.com/blockly/xml\"><variables></variables>"],[1,"www.w3.org/1999/xhtml\">\n  "],[0,"<blo"]],"start1":12,"start2":12,"length1":70,"length2":37},{"diffs":[[0,"art\""],[-1," x=\"20\" y=\"20\""],[0,"></b"]],"start1":67,"start2":67,"length1":22,"length2":8},{"diffs":[[0,"</block>"],[1,"\n  "],[0,"<block t"]],"start1":72,"start2":72,"length1":16,"length2":19},{"diffs":[[0,"ver\""],[-1," x=\"225\" y=\"20\""],[0,"></b"]],"start1":107,"start2":107,"length1":23,"length2":8},{"diffs":[[0,"</block>"],[1,"\n"],[0,"</xml>"]],"start1":112,"start2":112,"length1":14,"length2":15}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,".md\""],[-1,",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"pyprj\""],[1,"\n    ],\n    \"additionalFilePaths\": []"],[0,"\n}\n"]],"start1":219,"start2":219,"length1":64,"length2":44}]},{"type":"added","filename":"main.py","value":"from microbit import *\nimport utime\n\n# IR sensor pins\nIR_LEFT = pin0\nIR_CENTER = pin1\nIR_RIGHT = pin2\n\n# Ultrasonic sensor pins\nTRIG = pin8\nECHO = pin12\n\n# Motor control pins\nLEFT_FORWARD = pin13\nLEFT_BACKWARD = pin14\nRIGHT_FORWARD = pin15\nRIGHT_BACKWARD = pin16\n\n# Helper: set motor speed (0 to 1023)\ndef set_motors(left_speed, right_speed):\n    # Forward or backward for left motor\n    if left_speed >= 0:\n        LEFT_FORWARD.write_analog(left_speed)\n        LEFT_BACKWARD.write_digital(0)\n    else:\n        LEFT_FORWARD.write_digital(0)\n        LEFT_BACKWARD.write_analog(abs(left_speed))\n\n    # Forward or backward for right motor\n    if right_speed >= 0:\n        RIGHT_FORWARD.write_analog(right_speed)\n        RIGHT_BACKWARD.write_digital(0)\n    else:\n        RIGHT_FORWARD.write_digital(0)\n        RIGHT_BACKWARD.write_analog(abs(right_speed))\n\n# Measure distance using ultrasonic\ndef measure_distance():\n    TRIG.write_digital(0)\n    utime.sleep_us(2)\n    TRIG.write_digital(1)\n    utime.sleep_us(10)\n    TRIG.write_digital(0)\n\n    while ECHO.read_digital() == 0:\n        start = utime.ticks_us()\n    while ECHO.read_digital() == 1:\n        end = utime.ticks_us()\n\n    duration = utime.ticks_diff(end, start)\n    distance_cm = duration / 58.0\n    return distance_cm\n\n# Read IR sensors\ndef read_line():\n    left = IR_LEFT.read_digital()\n    center = IR_CENTER.read_digital()\n    right = IR_RIGHT.read_digital()\n    return (left, center, right)\n\n# Line following logic\ndef follow_line():\n    left, center, right = read_line()\n\n    if center == 1 and left == 0 and right == 0:\n        # Go straight\n        set_motors(800, 800)\n    elif left == 1 and center == 0:\n        # Turn left\n        set_motors(300, 800)\n    elif right == 1 and center == 0:\n        # Turn right\n        set_motors(800, 300)\n    elif left == 1 and right == 1:\n        # Sharp turn or junction - slow down\n        set_motors(500, 500)\n    else:\n        # Line lost - stop or reverse\n        set_motors(-300, -300)\n        sleep(300)\n\n# Obstacle avoidance logic\ndef avoid_obstacle():\n    # Stop and turn\n    set_motors(-300, -300)\n    sleep(400)\n    set_motors(-300, 300)\n    sleep(600)\n\n# Main loop\nwhile True:\n    try:\n        dist = measure_distance()\n        if dist < 15:\n            avoid_obstacle()\n        else:\n            follow_line()\n        sleep(50)\n    except:\n        # Safe fail in case of read errors\n        set_motors(0, 0)\n        display.show('!')\n        sleep(500)\n"}]},{"timestamp":1752501152873,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.py","patch":[{"diffs":[[0,"t *\n"],[-1,"\n# Assign"],[1,"import utime\n\n# IR sensor"],[0," pin"]],"start1":19,"start2":19,"length1":17,"length2":33},{"diffs":[[0,"= pin2\n\n"],[1,"# Ultrasonic sensor pins\n"],[0,"TRIG = p"]],"start1":95,"start2":95,"length1":16,"length2":41},{"diffs":[[0," pin12\n\n"],[1,"# Motor control pins\n"],[0,"LEFT_FOR"]],"start1":146,"start2":146,"length1":16,"length2":37},{"diffs":[[0,"\n\n# "],[-1,"Control motors"],[1,"Helper: set motor speed (0 to 1023)"],[0,"\ndef"]],"start1":262,"start2":262,"length1":22,"length2":43},{"diffs":[[0,"left"],[1,"_speed"],[0,", right"],[1,"_speed"],[0,"):\n    "],[-1,"if left == \"F\":\n        LEFT_FORWARD.write_digital(1)\n        LEFT_BACKWARD.write_digital(0)"],[1,"# Forward or backward for left motor"],[0,"\n    "],[-1,"el"],[0,"if left"],[-1," == \"B\""],[1,"_speed >= 0"],[0,":\n  "]],"start1":317,"start2":317,"length1":135,"length2":93},{"diffs":[[0,"RWARD.write_"],[-1,"digital(0"],[1,"analog(left_speed"],[0,")\n        LE"]],"start1":423,"start2":423,"length1":33,"length2":41},{"diffs":[[0,"D.write_digital("],[-1,"1"],[1,"0"],[0,")\n    else:\n    "]],"start1":474,"start2":474,"length1":33,"length2":33},{"diffs":[[0,"ite_"],[-1,"digital(0)\n\n    if right == \"F\":\n        RIGHT_FORWARD.write_digital(1"],[1,"analog(abs(left_speed)"],[0,")\n"],[1,"\n"],[0,"    "],[-1,"    RIGHT_BACKWARD.write_digital(0)"],[1,"# Forward or backward for right motor"],[0,"\n    "],[-1,"el"],[0,"if right"],[-1," == \"B\""],[1,"_speed >= 0"],[0,":\n  "]],"start1":565,"start2":565,"length1":141,"length2":98},{"diffs":[[0,"RWARD.write_"],[-1,"digital(0"],[1,"analog(right_speed"],[0,")\n        RI"]],"start1":677,"start2":677,"length1":33,"length2":42},{"diffs":[[0,"ite_digital("],[-1,"1"],[1,"0"],[0,")\n    else:\n"]],"start1":734,"start2":734,"length1":25,"length2":25},{"diffs":[[0,"ite_"],[-1,"digital(0)\n\n# Ultrasonic distance (approx)"],[1,"analog(abs(right_speed))\n\n# Measure distance using ultrasonic"],[0,"\ndef"]],"start1":823,"start2":823,"length1":50,"length2":69},{"diffs":[[0,"(0)\n    "],[1,"utime."],[0,"sleep"],[1,"_us"],[0,"(2)\n    "]],"start1":935,"start2":935,"length1":21,"length2":30},{"diffs":[[0,"(1)\n    "],[1,"utime."],[0,"sleep"],[1,"_us"],[0,"(10)\n   "]],"start1":983,"start2":983,"length1":21,"length2":30},{"diffs":[[0,"    "],[-1,"pass\n    start = running_time"],[1,"start = utime.ticks_us"],[0,"()\n"],[-1,"\n"],[0,"    "]],"start1":1077,"start2":1077,"length1":41,"length2":33},{"diffs":[[0,"    "],[-1,"pass\n    end = running_time"],[1,"end = utime.ticks_us"],[0,"()\n\n"]],"start1":1146,"start2":1146,"length1":35,"length2":28},{"diffs":[[0,"n = "],[1,"utime.ticks_diff("],[0,"end"],[-1," -"],[1,","],[0," start"],[1,")"],[0,"\n   "]],"start1":1185,"start2":1185,"length1":19,"length2":36},{"diffs":[[0,"distance"],[1,"_cm"],[0," = durat"]],"start1":1222,"start2":1222,"length1":16,"length2":19},{"diffs":[[0,"ion "],[-1,"* 17 / 1"],[1,"/ 58."],[0,"0\n  "]],"start1":1241,"start2":1241,"length1":16,"length2":13},{"diffs":[[0,"ance"],[1,"_cm"],[0,"\n\n# "],[-1,"IR reading"],[1,"Read IR sensors"],[0,"\ndef"]],"start1":1267,"start2":1267,"length1":22,"length2":30},{"diffs":[[0,"ollowing"],[1," logic"],[0,"\ndef fol"]],"start1":1461,"start2":1461,"length1":16,"length2":22},{"diffs":[[0,"right == 0:\n"],[1,"        # Go straight\n"],[0,"        set_"]],"start1":1571,"start2":1571,"length1":24,"length2":46},{"diffs":[[0," set_motors("],[-1,"\"F\", \"F\""],[1,"800, 800"],[0,")\n    elif l"]],"start1":1612,"start2":1612,"length1":32,"length2":32},{"diffs":[[0,"if left == 1"],[-1,":"],[1," and center == 0:\n        # Turn left"],[0,"\n        set"]],"start1":1640,"start2":1640,"length1":25,"length2":61},{"diffs":[[0," set_motors("],[-1,"\"B\", \"F\""],[1,"300, 800"],[0,")\n    elif r"]],"start1":1697,"start2":1697,"length1":32,"length2":32},{"diffs":[[0," elif right == 1"],[-1,":"],[1," and center == 0:\n        # Turn right"],[0,"\n        set_mot"]],"start1":1722,"start2":1722,"length1":33,"length2":70},{"diffs":[[0,"ors("],[-1,"\"F\", \"B\""],[1,"800, 300"],[0,")\n  "]],"start1":1792,"start2":1792,"length1":16,"length2":16},{"diffs":[[0,"right == 1:\n"],[1,"        # Sharp turn or junction - slow down\n"],[0,"        set_"]],"start1":1829,"start2":1829,"length1":24,"length2":69},{"diffs":[[0,"ors("],[-1,"\"F\", \"F\""],[1,"500, 500"],[0,")\n  "]],"start1":1901,"start2":1901,"length1":16,"length2":16},{"diffs":[[0,"        "],[-1,"set_motors(\"S\", \"S\""],[1,"# Line lost - stop or reverse\n        set_motors(-300, -300)\n        sleep(300"],[0,")\n\n# Obs"]],"start1":1925,"start2":1925,"length1":35,"length2":94},{"diffs":[[0,"voidance"],[1," logic"],[0,"\ndef avo"]],"start1":2026,"start2":2026,"length1":16,"length2":22},{"diffs":[[0,"obstacle():\n"],[1,"    # Stop and turn\n"],[0,"    set_moto"]],"start1":2051,"start2":2051,"length1":24,"length2":44},{"diffs":[[0,"ors("],[-1,"\"B\", \"B\""],[1,"-300, -300"],[0,")\n  "]],"start1":2094,"start2":2094,"length1":16,"length2":18},{"diffs":[[0,"  sleep("],[-1,"5"],[1,"4"],[0,"00)\n    "]],"start1":2112,"start2":2112,"length1":17,"length2":17},{"diffs":[[0,"ors("],[-1,"\"B\", \"F\""],[1,"-300, 300"],[0,")\n  "]],"start1":2136,"start2":2136,"length1":16,"length2":17},{"diffs":[[0,"600)\n\n# "],[-1,"L"],[1,"Main l"],[0,"oop\nwhil"]],"start1":2161,"start2":2161,"length1":17,"length2":22},{"diffs":[[0,"    dist"],[-1,"ance"],[0," = measu"]],"start1":2204,"start2":2204,"length1":20,"length2":16},{"diffs":[[0," if dist"],[-1,"ance"],[0," < 15:\n "]],"start1":2241,"start2":2241,"length1":20,"length2":16},{"diffs":[[0,"  sleep("],[-1,"10"],[1,"5"],[0,"0)\n    e"]],"start1":2331,"start2":2331,"length1":18,"length2":17},{"diffs":[[0,"except:\n"],[1,"        # Safe fail in case of read errors\n"],[0,"        "]],"start1":2347,"start2":2347,"length1":16,"length2":59},{"diffs":[[0,"ors("],[-1,"\"S\", \"S\""],[1,"0, 0"],[0,")\n  "]],"start1":2413,"start2":2413,"length1":16,"length2":12},{"diffs":[[0,"how("],[-1,"\"!\""],[1,"'!'"],[0,")\n  "]],"start1":2440,"start2":2440,"length1":11,"length2":11},{"diffs":[[0,"  sleep("],[-1,"10"],[1,"5"],[0,"00)\n"]],"start1":2455,"start2":2455,"length1":14,"length2":13}]}]},{"timestamp":1752501431876,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"iables><"],[1,"block type=\"pxt-on-start\" x=\"20\" y=\"20\"></block><block type=\"device_forever\" x=\"225\" y=\"20\"></block><"],[0,"/xml>"]],"start1":71,"start2":71,"length1":13,"length2":114}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0," ],\n"],[-1,"    \"testFiles\": [\n        \"test.ts\"\n    ],\n"],[0,"    "]],"start1":246,"start2":246,"length1":52,"length2":8}]},{"type":"edited","filename":"main.py","patch":[{"diffs":[[-1,"# Import necessary modules\nimport time  # For sleep functionality\nimport random  # For simulating sensor readings\n\n# Constants for motor control\nFORWARD_SPEED = 100\nTURN_SPEED = 50\nOBSTACLE_DISTANCE_THRESHOLD = 20  # Distance in cm to detect an obstacle\n\n# Mock functions to simulate motor control and sensor readings\ndef set_motor_speed(left_speed"],[1,"from microbit import *\n\n# Assign pins\nIR_LEFT = pin0\nIR_CENTER = pin1\nIR_RIGHT = pin2\n\nTRIG = pin8\nECHO = pin12\n\nLEFT_FORWARD = pin13\nLEFT_BACKWARD = pin14\nRIGHT_FORWARD = pin15\nRIGHT_BACKWARD = pin16\n\n# Control motors\ndef set_motors(left"],[0,", right"],[-1,"_speed"],[0,"):\n    "],[-1,"print(f\"Left Motor Speed: {left_speed}, Right Motor Speed: {right_speed}\")\n\ndef read_line_sensor():\n    # Simulate line sensor reading (1 for line detected, 0 for no line"],[1,"if left == \"F\":\n        LEFT_FORWARD.write_digital(1)\n        LEFT_BACKWARD.write_digital(0)\n    elif left == \"B\":\n        LEFT_FORWARD.write_digital(0)\n        LEFT_BACKWARD.write_digital(1)\n    else:\n        LEFT_FORWARD.write_digital(0)\n        LEFT_BACKWARD.write_digital(0"],[0,")\n"],[1,"\n"],[0,"    "],[-1,"return random.choice([0, 1])  # Replace with actual sensor reading\n\ndef read_obstacle_sensor():\n    # Simulate obstacle sensor reading (distance in cm)\n    return random.randint(5, 30)  # Replace with actual sensor reading\n\ndef follow_line():\n    while True:\n        line_detected = read_line_sensor()\n        obstacle_distance = read_obstacle_sensor()\n\n        if obstacle_distance < OBSTACLE_DISTANCE_THRESHOLD:\n            # Obstacle detected, stop and turn\n            print(\"Obstacle detected! Avoiding...\")\n            set_motor_speed(-TURN_SPEED, TURN_SPEED)  # Turn right\n            time.sleep(0.5)  # Adjust time as needed\n            set_motor_speed(FORWARD_SPEED, FORWARD_SPEED)  # Move forward\n        elif line_detected:\n            # Line detected, move forward\n            set_motor_speed(FORWARD_SPEED, FORWARD_SPEED)\n  "],[1,"if right == \"F\":\n        RIGHT_FORWARD.write_digital(1)\n        RIGHT_BACKWARD.write_digital(0)\n    elif right == \"B\":\n        RIGHT_FORWARD.write_digital(0)\n        RIGHT_BACKWARD.write_digital(1)\n    else:\n        RIGHT_FORWARD.write_digital(0)\n        RIGHT_BACKWARD.write_digital(0)\n\n# Ultrasonic distance (approx)\ndef measure_distance():\n    TRIG.write_digital(0)\n    sleep(2)\n    TRIG.write_digital(1)\n    sleep(10)\n    TRIG.write_digital(0)\n\n    while ECHO.read_digital() == 0:\n        pass\n    start = running_time()\n\n    while ECHO.read_digital() == 1:\n        pass\n    end = running_time()\n\n    duration = end - start\n    distance = duration * 17 / 10\n    return distance\n\n# IR reading\ndef read_line():\n    left = IR_LEFT.read_digital()\n    center = IR_CENTER.read_digital()\n    right = IR_RIGHT.read_digital()\n    return (left, center, right)\n\n# Line following\ndef follow_line():\n    left, center, right = read_line()\n\n    if center == 1 and left == 0 and right == 0:\n        set_motors(\"F\", \"F\")\n    elif left == 1:\n        set_motors(\"B\", \"F\")\n    elif right == 1:\n        set_motors(\"F\", \"B\")\n    elif left == 1 and right == 1:\n        set_motors(\"F\", \"F\")\n"],[0,"    "],[-1,"  "],[0,"else"]],"start1":0,"start2":0,"length1":1391,"length2":1715},{"diffs":[[0,"    "],[-1,"    # No line detected, adjust direction\n            print(\"No line detected! Searching...\")\n            set_motor_speed(TURN_SPEED, -TURN_SPEED)  # Turn left\n            time.sleep(0.5)  # Adjust ti"],[1,"set_motors(\"S\", \"S\")\n\n# Obstacle avoidance\ndef avoid_obstacle():\n    set_motors(\"B\", \"B\")\n    sleep(500)\n    set_motors(\"B\", \"F\")\n    sleep(600)\n\n# Loop\nwhile True:\n    try:\n        distance = "],[0,"me"],[-1," "],[0,"as"],[-1," needed\n\n        time.sleep(0.1)  # Small delay for loop iteration\n\n# Start the line following behavior\nif __name__ == \"__main__\""],[1,"ure_distance()\n        if distance < 15:\n            avoid_obstacle()\n        else"],[0,":\n    "],[-1,"try:\n"],[0,"    "]],"start1":1721,"start2":1721,"length1":352,"length2":293},{"diffs":[[0,"    "],[-1,"except KeyboardInterrupt:\n        print(\"Stopping the robot.\")\n        set_motor_speed(0, 0)  # Stop the robot"],[1,"    sleep(100)\n    except:\n        set_motors(\"S\", \"S\")\n        display.show(\"!\")\n        sleep(1000)"],[0,"\n"]],"start1":2032,"start2":2032,"length1":115,"length2":106}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"}]}],"snapshots":[{"timestamp":1752500609156,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"my robot\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}}],"shares":[],"lastSaveTime":1752501911259}